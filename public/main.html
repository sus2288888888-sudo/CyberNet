<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberNet</title>
    <link rel="stylesheet" href="style.css">
    <script src="/socket.io/socket.io.js"></script>
</head>

<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="profile-section">
                <img id="profile-pic" class="profile-pic" src="" alt="PFP">
                <h3 id="profile-username">User</h3>
                <p id="profile-bio" style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 5px;">Bio...
                </p>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button onclick="toggleSettings()"
                        style="width: auto; padding: 6px 12px; font-size: 0.8rem; background: rgba(255,255,255,0.1);">Settings</button>
                    <button onclick="logout()"
                        style="width: auto; padding: 6px 12px; font-size: 0.8rem; background: rgba(255,59,48,0.2); color: #ff3b30;">Log
                        Out</button>
                </div>
            </div>

            <div id="notifications-area"
                style="background: rgba(255,59,48,0.1); padding: 10px; border-radius: 12px; margin-bottom: 15px; display: none;">
                <h4
                    style="font-size: 0.8rem; color: var(--danger-color); margin-bottom: 5px; text-transform: uppercase;">
                    Incoming Requests</h4>
                <div id="requests-list"></div>
            </div>

            <div class="search-section" style="margin-bottom: 1rem;">
                <input type="text" id="user-search" placeholder="Search users..." oninput="searchUsers()"
                    style="margin-bottom: 5px;">
                <div id="search-results" style="max-height: 150px; overflow-y: auto;"></div>
            </div>

            <h4
                style="color: var(--text-secondary); margin-bottom: 10px; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px;">
                Friends</h4>
            <div id="friends-list" style="flex: 1; overflow-y: auto;">
                <!-- Friend items -->
            </div>
        </aside>

        <!-- Chat Area -->
        <main class="chat-area" id="chat-dropzone">
            <div class="drag-overlay">
                Drop Files to Upload
            </div>

            <div class="chat-header">
                <h2 id="current-chat-user" style="margin:0;">Select a user to chat</h2>
            </div>

            <div class="messages" id="messages-container">
                <!-- Messages go here -->
            </div>

            <div class="chat-footer">
                <button onclick="document.getElementById('media-input').click()"
                    style="width: 40px; height: 40px; border-radius: 50%; padding:0; display:flex; align-items:center; justify-content:center; font-size: 1.5rem;">+</button>
                <input type="text" id="message-input" placeholder="Type a message..."
                    style="margin:0; border-radius: 20px;">
                <input type="file" id="media-input" style="display: none;" multiple>
                <!-- Allow multiple eventually, currently single via JS -->
            </div>
        </main>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); z-index: 200; justify-content: center; align-items: center;">
        <div class="auth-box">
            <div style="text-align: right; margin-bottom: -20px;"><span onclick="toggleSettings()"
                    style="cursor: pointer; font-size: 1.5rem;">&times;</span></div>
            <h2>Edit Profile</h2>
            <form id="settings-form">
                <input type="text" id="set-username" placeholder="New Username">
                <input type="text" id="set-bio" placeholder="New Bio">
                <label
                    style="display: block; text-align: left; margin-bottom: 5px; font-size: 0.8rem; color: #aaa;">Profile
                    Picture:</label>
                <input type="file" id="set-pfp" accept="image/*">
                <button type="submit">Save Changes</button>
            </form>
        </div>
    </div>

    <script src="js/main.js"></script>
</body>

</html>